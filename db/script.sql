drop database if exists mydb;

create database mydb;

use mydb;

create table usuarios(
	id  BIGINT auto_increment primary key,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE,
    senha VARCHAR(50),
    role_id VARCHAR(30)
);

create table generos(
	id  BIGINT auto_increment primary key,
    nome VARCHAR(100) NOT NULL unique,
    descricao VARCHAR(500)
);

create table autores(
	id  BIGINT auto_increment primary key,
    nome VARCHAR(100) NOT NULL
);

create table livros(
	id  BIGINT auto_increment primary key,
    titulo VARCHAR(100) NOT NULL,
    ano_publicacao int NOT NULL,
    descricao TEXT,
	autor_id BIGINT NOT NULL,
	genero_id BIGINT NOT NULL,
    disponivel bool default false,

	CONSTRAINT fk_livro_autor FOREIGN KEY (autor_id) REFERENCES autores(id),
    CONSTRAINT fk_livro_genero FOREIGN KEY (genero_id) REFERENCES generos(id)
);

CREATE TABLE aluguel_livro (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    data_hora_aluguel TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    registro_observacao VARCHAR(700),
    data_hora_devolucao TIMESTAMP NULL,
    cliente_id BIGINT NOT NULL,
    livro_id BIGINT NOT NULL,
    situacao ENUM('ALUGADO', 'DEVOLVIDO', 'ATRASADO') NOT NULL,

    CONSTRAINT fk_aluguel_cliente FOREIGN KEY (cliente_id) REFERENCES usuarios(id),
    CONSTRAINT fk_aluguel_livro FOREIGN KEY (livro_id) REFERENCES livros(id),
    CONSTRAINT chk_data_devolucao CHECK (data_hora_devolucao > data_hora_aluguel)
);

INSERT INTO usuarios (id, nome, email, senha, role_id) VALUES
(1, 'Cláudio', 'claudio_user@gmail.com', '123456', 'CLIENTE'),
(2, 'Maria Silva', 'maria.silva@gmail.com', 'senha123', 'CLIENTE'),
(3, 'João Pereira', 'joao.pereira@gmail.com', 'senha123', 'CLIENTE'),
(4, 'Luciana Alves', 'luciana.alves@gmail.com', 'senha123', 'CLIENTE'),
(5, 'Admin', 'admin@biblioteca.com', 'admin123', 'ADMIN'),
(6, 'Carlos Lima', 'carlos.lima@gmail.com', 'senha123', 'CLIENTE'),
(7, 'Fernanda Rocha', 'fernanda.rocha@gmail.com', 'senha123', 'CLIENTE'),
(8, 'Bruno Souza', 'bruno.souza@gmail.com', 'senha123', 'CLIENTE'),
(9, 'Patrícia Gomes', 'patricia.gomes@gmail.com', 'senha123', 'CLIENTE'),
(10, 'Rafael Costa', 'rafael.costa@gmail.com', 'senha123', 'CLIENTE'),
(11, 'Juliana Ramos', 'juliana.ramos@gmail.com', 'senha123', 'CLIENTE'),
(12, 'Eduardo Oliveira', 'eduardo.oliveira@gmail.com', 'senha123', 'CLIENTE'),
(13, 'Camila Torres', 'camila.torres@gmail.com', 'senha123', 'CLIENTE'),
(14, 'Thiago Fernandes', 'thiago.fernandes@gmail.com', 'senha123', 'CLIENTE'),
(15, 'Larissa Castro', 'larissa.castro@gmail.com', 'senha123', 'CLIENTE'),
(16, 'Vinícius Almeida', 'vinicius.almeida@gmail.com', 'senha123', 'CLIENTE'),
(17, 'Beatriz Martins', 'beatriz.martins@gmail.com', 'senha123', 'CLIENTE'),
(18, 'Lucas Moreira', 'lucas.moreira@gmail.com', 'senha123', 'CLIENTE'),
(19, 'Aline Duarte', 'aline.duarte@gmail.com', 'senha123', 'CLIENTE'),
(20, 'Marcelo Teixeira', 'marcelo.teixeira@gmail.com', 'senha123', 'CLIENTE'),
(21, 'Débora Nunes', 'debora.nunes@gmail.com', 'senha123', 'CLIENTE'),
(22, 'Henrique Pires', 'henrique.pires@gmail.com', 'senha123', 'CLIENTE'),
(23, 'Natália Ferreira', 'natalia.ferreira@gmail.com', 'senha123', 'CLIENTE'),
(24, 'Igor Cardoso', 'igor.cardoso@gmail.com', 'senha123', 'CLIENTE'),
(25, 'Tatiane Brito', 'tatiane.brito@gmail.com', 'senha123', 'CLIENTE'),
(26, 'Rodrigo Mendes', 'rodrigo.mendes@gmail.com', 'senha123', 'CLIENTE'),
(27, 'Priscila Moraes', 'priscila.moraes@gmail.com', 'senha123', 'CLIENTE'),
(28, 'Diego Rezende', 'diego.rezende@gmail.com', 'senha123', 'CLIENTE'),
(29, 'Simone Ribeiro', 'simone.ribeiro@gmail.com', 'senha123', 'CLIENTE'),
(30, 'Administrador Secundário', 'admin2@biblioteca.com', 'admin456', 'ADMIN');

INSERT INTO autores (id, nome) VALUES
(1, 'José Saramago'),
(2, 'Ernest Hemingway'),
(3, 'Jane Austen'),
(4, 'Fiódor Dostoiévski'),
(5, 'Virginia Woolf'),
(6, 'Franz Kafka'),
(7, 'Albert Camus'),
(8, 'Italo Calvino'),
(9, 'Neil Gaiman'),
(10, 'Toni Morrison'),
(11, 'Chimamanda Ngozi Adichie'),
(12, 'Yuval Noah Harari'),
(13, 'George R.R. Martin'),
(14, 'Philip K. Dick'),
(15, 'Margaret Atwood'),
(16, 'Isaac Asimov'),
(17, 'Ray Bradbury'),
(18, 'Ursula K. Le Guin'),
(19, 'Agatha Christie'),
(20, 'Arthur Conan Doyle'),
(21, 'Dan Brown'),
(22, 'Paulo Coelho'),
(23, 'Zadie Smith'),
(24, 'Colleen Hoover'),
(25, 'Stephenie Meyer'),
(26, 'J.D. Salinger'),
(27, 'John Green'),
(28, 'Khaled Hosseini'),
(29, 'Murilo Rubião'),
(30, 'José de Alencar'),
(31, 'Lygia Fagundes Telles'),
(32, 'Conceição Evaristo'),
(33, 'Rubem Fonseca'),
(34, 'Rachel de Queiroz'),
(35, 'Graciliano Ramos'),
(36, 'Nelson Rodrigues');

INSERT INTO generos (id, nome, descricao) VALUES
(1, 'Drama', 'Obras com foco em conflitos emocionais e relações humanas intensas'),
(2, 'Aventura', 'Narrativas com exploração, perigo e ação'),
(3, 'Comédia', 'Textos com humor e situações engraçadas'),
(4, 'Distopia', 'Sociedades futuristas com cenários opressivos'),
(5, 'Utopia', 'Sociedades idealizadas e perfeitas'),
(6, 'Clássico', 'Obras consagradas pela crítica e pelo tempo'),
(7, 'Infantil', 'Livros voltados para o público infantil'),
(8, 'Infantojuvenil', 'Obras para crianças maiores e adolescentes'),
(9, 'Young Adult (YA)', 'Livros para o público jovem-adulto com temas de amadurecimento'),
(10, 'Suspense', 'Tramas envolventes com tensão e reviravoltas'),
(11, 'Policial', 'Histórias centradas em crimes e investigações'),
(12, 'Erótico', 'Literatura com temas sensuais ou sexuais'),
(13, 'Fantasia Urbana', 'Elementos mágicos em ambientes urbanos'),
(14, 'Literatura Brasileira', 'Obras escritas por autores brasileiros'),
(15, 'Literatura Estrangeira', 'Obras escritas por autores de fora do Brasil'),
(16, 'Autoajuda', 'Livros com conselhos práticos para o bem-estar'),
(17, 'Filosofia', 'Textos com reflexões sobre a existência e o pensamento'),
(18, 'Ciência', 'Livros sobre temas científicos de forma técnica ou acessível'),
(19, 'Tecnologia', 'Obras sobre inovações tecnológicas e seu impacto'),
(20, 'Psicologia', 'Textos que abordam o comportamento e a mente humana'),
(21, 'Educação', 'Materiais voltados ao ensino e aprendizagem'),
(22, 'Religião', 'Obras com temas espirituais ou doutrinários'),
(23, 'Espiritualidade', 'Textos voltados ao desenvolvimento interior e à fé'),
(24, 'História', 'Livros com foco em eventos históricos e cronológicos'),
(25, 'Sociologia', 'Análises sociais e culturais da humanidade'),
(26, 'Economia', 'Obras sobre finanças, mercado e gestão econômica'),
(27, 'Política', 'Textos que tratam de ideologias, governos e sociedade'),
(28, 'Direito', 'Livros sobre leis, justiça e sistemas jurídicos'),
(29, 'Saúde', 'Textos sobre medicina e cuidados com o corpo'),
(30, 'Gastronomia', 'Obras sobre culinária e cultura alimentar');

INSERT INTO livros (titulo, autor_id, ano_publicacao, genero_id, descricao) VALUES
('O Velho e o Mar', 2, 1952, 6, 'Um velho pescador enfrenta um enorme marlim em alto-mar.'),
('Orgulho e Preconceito', 3, 1813, 6, 'Romance sobre classe social, orgulho e relacionamentos.'),
('Crime e Castigo', 4, 1866, 1, 'Um jovem comete um assassinato e é consumido pela culpa.'),
('Mrs. Dalloway', 5, 1925, 6, 'A vida de Clarissa Dalloway em um único dia.'),
('A Metamorfose', 6, 1915, 1, 'Um homem acorda transformado em inseto.'),
('O Estrangeiro', 7, 1942, 1, 'Um homem indiferente à vida comete um crime.'),
('As Cidades Invisíveis', 8, 1972, 6, 'Narrativas de cidades imaginárias contadas a Kublai Khan.'),
('Deuses Americanos', 9, 2001, 13, 'Um homem se vê no meio de uma guerra entre deuses antigos e novos.'),
('Amada', 10, 1987, 14, 'Uma mulher é assombrada pelo fantasma de sua filha escravizada.'),
('Meio Sol Amarelo', 11, 2006, 14, 'Durante a guerra de Biafra na Nigéria.'),
('Sapiens', 12, 2011, 25, 'História da humanidade desde a era das cavernas.'),
('O Festim dos Corvos', 13, 2005, 1, 'Intrigas e guerras em Westeros continuam.'),
('O Homem do Castelo Alto', 14, 1962, 2, 'E se os nazistas tivessem vencido a Segunda Guerra Mundial?'),
('O Conto da Aia', 15, 1985, 11, 'Uma distopia onde mulheres são propriedades do Estado.'),
('Fundação', 16, 1951, 2, 'Previsões matemáticas e o colapso de um império galáctico.'),
('Fahrenheit 451', 17, 1953, 2, 'Livros são proibidos em uma sociedade totalitária.'),
('A Mão Esquerda da Escuridão', 18, 1969, 2, 'Contatos entre mundos e ambiguidade de gênero.'),
('Assassinato no Expresso Oriente', 19, 1934, 18, 'Hércule Poirot investiga um crime no trem.'),
('O Cão dos Baskervilles', 20, 1902, 18, 'Um mistério envolvendo uma lenda antiga.'),
('O Código Da Vinci', 21, 2003, 17, 'Uma conspiração histórica ligada à arte e à religião.'),
('O Alquimista', 22, 1988, 30, 'Jovem pastor segue seu destino e busca seu tesouro.'),
('Dentes Brancos', 23, 2000, 30, 'Retrato de famílias multiculturais em Londres.'),
('É Assim que Acaba', 24, 2016, 3, 'Relacionamento tóxico contado com sensibilidade.'),
('Crepúsculo', 25, 2005, 1, 'Romance sobrenatural entre uma humana e um vampiro.'),
('O Apanhador no Campo de Centeio', 26, 1951, 16, 'Um jovem questiona a hipocrisia do mundo adulto.'),
('A Culpa é das Estrelas', 27, 2012, 16, 'Dois adolescentes com câncer vivem um amor intenso.'),
('O Caçador de Pipas', 28, 2003, 14, 'Dois meninos e uma traição no Afeganistão.'),
('O Pirotécnico Zacarias', 29, 1974, 4, 'Conto surreal do mestre do realismo fantástico.'),
('Iracema', 30, 1865, 3, 'Romance romântico indígena.'),
('Ciranda de Pedra', 31, 1954, 3, 'Retrato psicológico de uma jovem burguesa.'),
('Ponciá Vicêncio', 32, 2003, 14, 'Mulher negra em busca de identidade e pertencimento.'),
('Agosto', 33, 1990, 18, 'Suspense político durante o suicídio de Vargas.'),
('O Quinze', 34, 1930, 3, 'Narrativa da seca de 1915 no Ceará.'),
('Vidas Secas', 35, 1938, 3, 'Família sertaneja enfrenta miséria e seca.'),
('O Beijo no Asfalto', 36, 1960, 10, 'Dramas urbanos com crítica social.'),
('O Hobbit', 1, 1937, 1, 'A jornada inesperada de Bilbo Bolseiro.'),
('A Revolução dos Bichos', 2, 1945, 11, 'Uma fábula sobre poder e totalitarismo.'),
('Harry Potter e a Câmara Secreta', 3, 1998, 1, 'Segundo ano de Harry em Hogwarts.'),
('Memórias Póstumas de Brás Cubas', 6, 1881, 3, 'Um defunto narra sua vida com ironia.'),
('Carrie', 7, 1974, 6, 'Adolescente com poderes telecinéticos busca vingança.'),
('Perto do Coração Selvagem', 8, 1943, 3, 'Prosa lírica de uma jovem mulher em crise.'),
('A Jornada das Estrelas', 9, 2015, 2, 'Uma nave espacial explora novos planetas.'),
('Códigos do Universo', 12, 2018, 25, 'Teorias físicas e metafísicas sobre a existência.'),
('Segredos de Família', 10, 2009, 3, 'Um drama familiar com revelações intensas.'),
('A Última Profecia', 9, 2020, 1, 'Um herói relutante precisa cumprir seu destino.'),
('No Coração da Tempestade', 33, 2019, 17, 'Suspense policial em uma cidade litorânea.'),
('O Palácio dos Espelhos', 14, 2007, 4, 'História simbólica sobre identidade e solidão.'),
('Vozes da Floresta', 35, 2016, 30, 'Contos sobre sabedoria indígena e natureza.'),
('Manual do Hacker Ético', 18, 2022, 26, 'Guia técnico e prático de segurança cibernética.'),
('Os Filhos da Esperança', 15, 1992, 11, 'Um futuro sem nascimentos abala a civilização.'),
('As Crônicas da Luz', 13, 2013, 1, 'Guerreiros mágicos enfrentam forças sombrias.'),
('Café com Filosofia', 16, 2021, 24, 'Reflexões diárias em linguagem acessível.'),
('Redes que Transformam', 12, 2020, 27, 'O poder dos laços sociais no comportamento.'),
('Mistérios de Kyoto', 5, 2017, 5, 'Tramas delicadas e enigmáticas no Japão.'),
('Diários de um Cientista', 17, 2008, 25, 'Experimentos e dilemas éticos do progresso.'),
('O Labirinto da Mente', 19, 2010, 6, 'Suspense psicológico com reviravoltas inesperadas.'),
('Contos de Fadas Reimaginados', 24, 2023, 1, 'Versões sombrias e feministas de clássicos infantis.'),
('A Máquina do Tempo', 22, 1895, 2, 'Viagem ao futuro e os perigos da evolução.'),
('Maré de Sangue', 7, 2015, 6, 'Um vilarejo isolado esconde horrores antigos.'),
('Sombras no Subúrbio', 36, 2018, 5, 'Mistério urbano com crítica social.'),
('Doce Amargo', 26, 2002, 3, 'Um romance sobre perdas e renascimentos.'),
('Entre o Céu e o Inferno', 22, 2011, 30, 'Reflexões espirituais sobre escolhas e fé.'),
('A Biblioteca das Almas', 21, 2015, 1, 'Mundo alternativo onde memórias são armazenadas.'),
('Sob a Luz do Luar', 23, 2014, 3, 'Drama romântico em meio ao campo francês.'),
('Além da Muralha', 13, 2011, 1, 'Terras congeladas e criaturas sobrenaturais.'),
('Lógica da Confusão', 31, 2004, 24, 'Ficção filosófica com traços surrealistas.'),
('Ecos do Silêncio', 5, 2020, 14, 'Drama existencial com forte linguagem simbólica.'),
('O Retorno do Mago', 9, 2010, 1, 'Um novo escolhido precisa deter as trevas.'),
('A Fórmula Secreta', 12, 2012, 25, 'Matemática, enigmas e conspirações científicas.'),
('A Dama do Mistério', 19, 2006, 18, 'Mais um caso para o detetive aposentado.'),
('Cartas ao Vento', 8, 1999, 3, 'Obra poética sobre o amor perdido.');

INSERT INTO aluguel_livro (data_hora_aluguel, data_hora_devolucao, cliente_id, livro_id, situacao, registro_observacao) VALUES
('2025-06-01 10:00:00', '2025-06-10 11:00:00', 2, 5, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-02 09:30:00', '2025-06-12 09:30:00', 3, 6, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-03 15:45:00', '2025-06-13 16:00:00', 4, 7, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-04 11:00:00', '2025-06-14 11:00:00', 5, 8, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-05 14:20:00', '2025-06-15 14:20:00', 7, 9, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-06 13:15:00', '2025-06-16 13:15:00', 8, 10, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-07 08:00:00', '2025-06-17 08:00:00', 9, 11, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-08 17:00:00', '2025-06-18 17:30:00', 10, 12, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-09 10:10:00', '2025-06-19 10:10:00', 11, 13, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-10 09:00:00', '2025-06-20 09:00:00', 12, 14, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-11 14:45:00', '2025-06-21 14:45:00', 13, 15, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-12 16:30:00', '2025-06-22 16:30:00', 14, 16, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-13 12:15:00', '2025-06-23 12:15:00', 15, 17, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-14 10:50:00', '2025-06-24 10:50:00', 16, 18, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-15 11:25:00', '2025-06-25 11:25:00', 17, 19, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-16 09:40:00', '2025-06-26 09:40:00', 18, 20, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-17 13:30:00', '2025-06-27 13:30:00', 19, 21, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-18 14:00:00', '2025-06-28 14:00:00', 20, 22, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-19 15:15:00', '2025-06-29 15:15:00', 21, 23, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-20 08:50:00', '2025-06-30 08:50:00', 22, 24, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-21 17:05:00', '2025-07-01 17:05:00', 23, 25, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-22 11:45:00', '2025-07-02 11:45:00', 24, 26, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-23 12:30:00', '2025-07-03 12:30:00', 25, 27, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-24 10:10:00', '2025-07-04 10:10:00', 26, 28, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-25 13:00:00', '2025-07-05 13:00:00', 27, 29, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-26 14:40:00', '2025-07-06 14:40:00', 28, 30, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-27 09:20:00', '2025-07-07 09:20:00', 29, 31, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-28 16:00:00', '2025-07-08 16:00:00', 30, 32, 'ALUGADO', 'Nenhuma observação.'),
('2025-06-29 11:55:00', '2025-07-09 11:55:00', 2, 33, 'DEVOLVIDO', 'Nenhuma observação.'),
('2025-06-30 15:10:00', '2025-07-10 15:10:00', 3, 34, 'ALUGADO', 'Nenhuma observação.'),
('2025-07-01 09:00:00', '2025-07-11 09:00:00', 4, 35, 'ALUGADO', 'Cliente renovou o aluguel.');